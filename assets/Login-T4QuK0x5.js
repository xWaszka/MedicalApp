import{_ as p,c as l,b as s,u as _,l as g,m as c,x as u,t as h,G as w,y as f,z as m,A as b,B as y,C as v,D as x,E as z,o as d,a as G}from"./index-8pIQ3OZO.js";const N={data(){return{email:"",password:"",error:""}},methods:{async login(){this.error="";try{await z(m,this.email,this.password),this.$router.push("/")}catch{this.error="Nieprawidłowy email lub hasło."}},async signInWithGoogle(){try{const r=new w,i=(await f(m,r)).user,n=b(y,"users",i.uid);if(!(await v(n)).exists()){const a=i.displayName||"";await x(n,{name:a,email:i.email})}this.$router.push("/")}catch(r){console.error("Błąd logowania przez Google:",r),this.error="Wystąpił błąd podczas logowania przez Google."}}}},W={class:"container mt-5"},B={class:"row justify-content-center"},D={class:"col-md-6"},I=s("h2",{class:"text-center mb-4"},"Logowanie",-1),V={class:"form-group mb-3"},k=s("label",{for:"email"},"Email",-1),E={class:"form-group mb-3"},S=s("label",{for:"password"},"Hasło",-1),j={key:0,class:"alert alert-danger"},A=s("button",{type:"submit",class:"btn btn-primary w-100"}," Zaloguj ",-1);function C(r,o,i,n,e,a){return d(),l("div",W,[s("div",B,[s("div",D,[I,s("form",{onSubmit:o[2]||(o[2]=_((...t)=>a.login&&a.login(...t),["prevent"]))},[s("div",V,[k,c(s("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>e.email=t),type:"email",id:"email",class:"form-control",required:""},null,512),[[u,e.email]])]),s("div",E,[S,c(s("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>e.password=t),type:"password",id:"password",class:"form-control",required:""},null,512),[[u,e.password]])]),e.error?(d(),l("div",j,h(e.error),1)):g("",!0),A],32),s("button",{onClick:o[3]||(o[3]=(...t)=>a.signInWithGoogle&&a.signInWithGoogle(...t)),class:"btn btn-danger w-100 mt-3"}," Zaloguj przez Google ")])])])}const L=p(N,[["render",C]]),q={__name:"Login",setup(r){return(o,i)=>(d(),l("div",null,[G(L)]))}};export{q as default};
