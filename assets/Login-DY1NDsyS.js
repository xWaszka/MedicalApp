import{_ as g,r as h,c as l,b as s,a as p,w,j as f,u as b,l as y,m as d,x as u,t as v,G as x,y as z,z as m,A as G,B as N,C as k,D as j,E as V,o as c}from"./index-BbnBNmEC.js";const W={data(){return{email:"",password:"",error:""}},methods:{async login(){this.error="";try{await V(m,this.email,this.password),this.$router.push("/")}catch{this.error="Nieprawidłowy email lub hasło."}},async signInWithGoogle(){try{const r=new x,i=(await z(m,r)).user,n=G(N,"users",i.uid);if(!(await k(n)).exists()){const a=i.displayName||"";await j(n,{name:a,email:i.email})}this.$router.push("/")}catch(r){console.error("Błąd logowania przez Google:",r),this.error="Wystąpił błąd podczas logowania przez Google."}}}},B={class:"container mt-5"},C={class:"row justify-content-center"},D={class:"col-md-6"},I=s("h2",{class:"text-center mb-4"},"Logowanie",-1),L={class:"text-center mb-4"},E={class:"form-group mb-3"},S=s("label",{for:"email"},"Email",-1),A={class:"form-group mb-3"},P=s("label",{for:"password"},"Hasło",-1),R={key:0,class:"alert alert-danger"},Z=s("button",{type:"submit",class:"btn btn-primary w-100"}," Zaloguj ",-1);function q(r,e,i,n,o,a){const _=h("RouterLink");return c(),l("div",B,[s("div",C,[s("div",D,[I,s("p",L,[p(_,{to:"/register",class:"small"},{default:w(()=>[f("Nie posiadasz konta? Zarejestruj się!")]),_:1})]),s("form",{onSubmit:e[2]||(e[2]=b((...t)=>a.login&&a.login(...t),["prevent"]))},[s("div",E,[S,d(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.email=t),type:"email",id:"email",class:"form-control",required:""},null,512),[[u,o.email]])]),s("div",A,[P,d(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.password=t),type:"password",id:"password",class:"form-control",required:""},null,512),[[u,o.password]])]),o.error?(c(),l("div",R,v(o.error),1)):y("",!0),Z],32),s("button",{onClick:e[3]||(e[3]=(...t)=>a.signInWithGoogle&&a.signInWithGoogle(...t)),class:"btn btn-danger w-100 mt-3"}," Zaloguj się przez Google ")])])])}const M=g(W,[["render",q]]),U={__name:"Login",setup(r){return(e,i)=>(c(),l("div",null,[p(M)]))}};export{U as default};
