import{_ as S,f as b,g as z,c as a,b as t,F as g,h as A,M as h,N as y,p as M,i as B,B as l,o as s,t as i,Q as _,A as m}from"./index-BbnBNmEC.js";const p=r=>(M("data-v-664150b3"),r=r(),B(),r),N={class:"container my-5 pt-5"},x=p(()=>t("h1",{class:"mb-4"},"Panel Admina – wszystkie wizyty",-1)),j={key:0,class:"text-center my-4"},C=p(()=>t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Ładowanie...")],-1)),E=[C],F={key:1},L={key:0,class:"alert alert-info"},P={key:1,class:"table-responsive"},G={class:"table table-striped"},H=p(()=>t("thead",null,[t("tr",null,[t("th",null,"ID wizyty"),t("th",null,"Typ wizyty"),t("th",null,"Data"),t("th",null,"Godzina"),t("th",null,"Użytkownik"),t("th",null,"Przychodnia"),t("th",null,"Opis"),t("th",null,"Akcje")])],-1)),O={key:0},Q={key:1},T=["onClick"],U={__name:"Admin",setup(r){const c=b([]),u=b(!0);function f(o){return o&&typeof o.toDate=="function"?o.toDate():new Date(o)}async function k(){u.value=!0,c.value=[],(await h(y(l,"remoteappointments"))).forEach(e=>{const n=e.data();c.value.push({key:e.id,type:"remote",date:f(n.date),hour:n.contactHour||n.hour||"",userId:n.userId||"",paymentMethod:n.paymentMethod||"",description:n.description||""})});const w=await h(y(l,"clinics"));for(const e of w.docs){const n=e.id,D=e.data().name||n;(await h(y(l,"clinics",n,"appointments"))).forEach(v=>{const d=v.data();c.value.push({key:v.id,type:"clinic",clinicId:n,clinicName:D,date:f(d.date),hour:d.hour||"",userId:d.userId||"",paymentMethod:d.paymentMethod||"",description:d.description||""})})}c.value.sort((e,n)=>e.date<n.date?-1:e.date>n.date?1:e.hour.localeCompare(n.hour)),u.value=!1}async function I(o){confirm("Na pewno chcesz anulować tę wizytę?")&&(o.type==="remote"?await _(m(l,"remoteappointments",o.key)):await _(m(l,"clinics",o.clinicId,"appointments",o.key)),await _(m(l,"users",o.userId,"appointments",o.key)),await k())}return z(k),(o,w)=>(s(),a("div",N,[x,u.value?(s(),a("div",j,E)):(s(),a("div",F,[c.value.length?(s(),a("div",P,[t("table",G,[H,t("tbody",null,[(s(!0),a(g,null,A(c.value,e=>(s(),a("tr",{key:e.key},[t("td",null,i(e.key),1),t("td",null,i(e.type==="remote"?"Zdalna":"Stacjonarna"),1),t("td",null,i(e.date.toLocaleDateString()),1),t("td",null,i(e.hour||"–"),1),t("td",null,i(e.userId),1),e.type==="clinic"?(s(),a("td",O,i(e.clinicName),1)):(s(),a("td",Q,"–")),t("td",null,i(e.description||"–"),1),t("td",null,[t("button",{class:"btn btn-sm btn-danger",onClick:n=>I(e)}," Anuluj ",8,T)])]))),128))])])])):(s(),a("div",L," Brak wizyt do wyświetlenia. "))]))]))}},$=S(U,[["__scopeId","data-v-664150b3"]]);export{$ as default};
